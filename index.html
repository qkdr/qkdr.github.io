<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>موقع الأكواد الفخم</title>
<style>
  /* ========== Reset ========== */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  /* ========== Root Variables for Light and Dark ========== */
  :root {
    --bg-color-light: #f9f9f9;
    --text-color-light: #222;
    --primary-color: #0d6efd;
    --secondary-color: #6c757d;
    --accent-color: #ffc107;
    --border-color: #ddd;

    --bg-color-dark: #121212;
    --text-color-dark: #eee;
    --border-color-dark: #444;
  }

  /* ========== Light Theme ========== */
  body.light {
    background-color: var(--bg-color-light);
    color: var(--text-color-light);
  }
  body.light header,
  body.light nav,
  body.light .codes-modal,
  body.light .notification {
    background-color: #fff;
    color: var(--text-color-light);
    border: 1px solid var(--border-color);
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  /* ========== Dark Theme ========== */
  body.dark {
    background-color: var(--bg-color-dark);
    color: var(--text-color-dark);
  }
  body.dark header,
  body.dark nav,
  body.dark .codes-modal,
  body.dark .notification {
    background-color: #222;
    color: var(--text-color-dark);
    border: 1px solid var(--border-color-dark);
    box-shadow: 0 0 15px rgba(255,255,255,0.05);
  }

  /* ========== Header ========== */
  header {
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 1.5rem;
    letter-spacing: 1.2px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    position: sticky;
    top: 0;
    z-index: 999;
  }
  header .title {
    color: var(--primary-color);
  }
  header button#theme-toggle {
    cursor: pointer;
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 25px;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  header button#theme-toggle:hover {
    background-color: var(--accent-color);
    color: #222;
  }

  /* ========== Navigation (Sidebar) ========== */
  nav {
    width: 250px;
    height: 100vh;
    position: fixed;
    top: 0; left: 0;
    background: var(--primary-color);
    color: white;
    padding: 2rem 1rem;
    box-shadow: 3px 0 10px rgba(0,0,0,0.1);
    font-weight: 600;
  }
  nav h2 {
    margin-bottom: 2rem;
    font-size: 1.8rem;
    letter-spacing: 1.5px;
  }
  nav ul {
    list-style: none;
  }
  nav ul li {
    margin-bottom: 1.3rem;
    cursor: pointer;
    transition: background 0.3s;
    padding: 0.7rem 1rem;
    border-radius: 10px;
  }
  nav ul li:hover {
    background: var(--accent-color);
    color: #222;
  }

  /* ========== Main Content ========== */
  main {
    margin-left: 270px;
    padding: 2rem;
  }

  /* ========== Intro Section ========== */
  .intro {
    max-width: 900px;
    margin-bottom: 3rem;
    font-size: 1.2rem;
    line-height: 1.6;
    border-left: 5px solid var(--primary-color);
    padding-left: 1rem;
  }

  /* ========== Gallery of Images ========== */
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
  }
  .gallery-item {
    cursor: pointer;
    border-radius: 15px;
    overflow: hidden;
    border: 2px solid var(--border-color);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    background-color: white;
  }
  .gallery-item:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  }
  body.dark .gallery-item {
    background-color: #333;
    border-color: var(--border-color-dark);
  }
  .gallery-item img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    display: block;
  }
  .gallery-item .caption {
    padding: 1rem;
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--primary-color);
    text-align: center;
  }

  /* ========== Modal for Codes ========== */
  .codes-modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 90%;
    max-width: 500px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 0 40px rgba(0,0,0,0.3);
    z-index: 10000;
    transition: transform 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  body.dark .codes-modal {
    background: #222;
  }
  .codes-modal.active {
    transform: translate(-50%, -50%) scale(1);
  }
  .codes-modal header {
    background: var(--primary-color);
    color: white;
    padding: 1rem 1.5rem;
    font-size: 1.4rem;
    font-weight: 700;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .codes-modal header button.close-btn {
    background: transparent;
    border: none;
    font-size: 1.5rem;
    color: white;
    cursor: pointer;
    font-weight: 900;
  }
  .codes-list {
    padding: 1rem 1.5rem;
    flex-grow: 1;
    overflow-y: auto;
  }
  .code-item {
    background: var(--secondary-color);
    color: white;
    border-radius: 10px;
    padding: 0.8rem 1rem;
    margin-bottom: 1rem;
    font-family: monospace;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 0 10px rgba(0,0,0,0.15);
  }
  body.dark .code-item {
    background: #444;
  }
  .code-text {
    user-select: text;
  }
  .copy-btn {
    background: var(--accent-color);
    border: none;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    color: #222;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s;
  }
  .copy-btn:hover {
    background: #ffdb4d;
  }

  /* ========== Notification Popup ========== */
  .notification {
    position: fixed;
    top: 1rem; right: 1rem;
    background: var(--primary-color);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    font-weight: 700;
    opacity: 0;
    pointer-events: none;
    transform: translateY(-20px);
    transition: all 0.3s ease;
    z-index: 11000;
  }
  .notification.show {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  /* ========== Responsive ========== */
  @media (max-width: 768px) {
    nav {
      position: relative;
      width: 100%;
      height: auto;
      box-shadow: none;
      padding: 1rem;
      display: flex;
      justify-content: center;
      font-size: 1rem;
    }
    nav h2 {
      display: none;
    }
    main {
      margin-left: 0;
      padding: 1rem;
    }
    .gallery {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
  }

</style>
</head>
<body class="light">

<header>
  <div class="title">موقع الأكواد الفخم</div>
  <button id="theme-toggle" aria-label="تبديل الوضع">الوضع الداكن</button>
</header>

<nav>
  <h2>القائمة</h2>
  <ul>
    <li>الرئيسية</li>
    <li>الأكواد</li>
    <li>تواصل معنا</li>
  </ul>
</nav>

<main>
  <section class="intro" aria-label="مقدمة الموقع">
    <p>مرحبًا بك في موقع الأكواد الفخم! اختر صورة أدناه لعرض الأكواد الخاصة بها. يمكنك نسخ الأكواد بسهولة والاستفادة منها في مشاريعك. استخدم زر الوضع الداكن لتغيير مظهر الموقع حسب رغبتك.</p>
  </section>

  <section class="gallery" aria-label="معرض الصور">
    <!-- صور مع بيانات أكواد -->
    <div class="gallery-item" tabindex="0" data-title="الصورة الأولى" data-codes='["CODE123", "ABC456", "XYZ789"]'>
      <img src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=400&q=80" alt="صورة 1" />
      <div class="caption">صورة 1</div>
    </div>
    <div class="gallery-item" tabindex="0" data-title="الصورة الثانية" data-codes='["HELLO2025", "WORLD2025"]'>
      <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="صورة 2" />
      <div class="caption">صورة 2</div>
    </div>
    <div class="gallery-item" tabindex="0" data-title="الصورة الثالثة" data-codes='["FOO123", "BAR456", "BAZ789", "QUX101"]'>
      <img src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?auto=format&fit=crop&w=400&q=80" alt="صورة 3" />
      <div class="caption">صورة 3</div>
    </div>
  </section>
</main>

<!-- مودال الأكواد -->
<div class="codes-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1">
  <header>
    <span id="modal-title"></span>
    <button class="close-btn" aria-label="إغلاق">×</button>
  </header>
  <div class="codes-list" tabindex="0">
    <!-- الأكواد تظهر هنا -->
  </div>
</div>

<!-- إشعار نسخ الأكواد -->
<div class="notification" role="alert" aria-live="assertive" aria-atomic="true"></div>

<script>
  (() => {
    const body = document.body;
    const themeToggleBtn = document.getElementById('theme-toggle');
    const modal = document.querySelector('.codes-modal');
    const modalTitle = modal.querySelector('#modal-title');
    const codesList = modal.querySelector('.codes-list');
    const closeBtn = modal.querySelector('.close-btn');
    const notification = document.querySelector('.notification');
    const galleryItems = document.querySelectorAll('.gallery-item');

    // تبديل الوضع بين داكن وفاتح
    function toggleTheme() {
      if (body.classList.contains('light')) {
        body.classList.replace('light', 'dark');
        themeToggleBtn.textContent = 'الوضع الفاتح';
      } else {
        body.classList.replace('dark', 'light');
        themeToggleBtn.textContent = 'الوضع الداكن';
      }
    }

    themeToggleBtn.addEventListener('click', toggleTheme);

    // فتح نافذة الأكواد مع عرض الأكواد حسب الصورة
    function openModal(e) {
      const item = e.currentTarget;
      const title = item.getAttribute('data-title');
      const codes = JSON.parse(item.getAttribute('data-codes'));

      modalTitle.textContent = title;
      codesList.innerHTML = ''; // تفريغ الأكواد القديمة

      codes.forEach(code => {
        const codeDiv = document.createElement('div');
        codeDiv.className = 'code-item';

        const codeText = document.createElement('span');
        codeText.className = 'code-text';
        codeText.textContent = code;

        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.textContent = 'نسخ';
        copyBtn.title = 'نسخ الكود';
        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(code).then(() => {
            showNotification(`تم نسخ الكود: ${code}`);
          });
        });

        codeDiv.appendChild(codeText);
        codeDiv.appendChild(copyBtn);
        codesList.appendChild(codeDiv);
      });

      modal.classList.add('active');
      modal.focus();
    }

    // إغلاق المودال
    function closeModal() {
      modal.classList.remove('active');
    }

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', e => {
      if (e.target === modal) closeModal();
    });

    // دعم فتح المودال بالضغط على Enter/Space عند تحديد الصورة (للوصولية)
    galleryItems.forEach(item => {
      item.addEventListener('click', openModal);
      item.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModal({currentTarget: item});
        }
      });
    });

    // إشعار يظهر لفترة قصيرة
    let notifyTimeout;
    function showNotification(msg) {
      clearTimeout(notifyTimeout);
      notification.textContent = msg;
      notification.classList.add('show');
      notifyTimeout = setTimeout(() => {
        notification.classList.remove('show');
      }, 2500);
    }

    // حفظ تفضيل الوضع (مظلم أو فاتح) في localStorage
    function loadTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        body.className = savedTheme;
        themeToggleBtn.textContent = savedTheme === 'dark' ? 'الوضع الفاتح' : 'الوضع الداكن';
      } else {
        body.className = 'light';
        themeToggleBtn.textContent = 'الوضع الداكن';
      }
    }
    function saveTheme() {
      localStorage.setItem('theme', body.className);
    }
    themeToggleBtn.addEventListener('click', () => {
      toggleTheme();
      saveTheme();
    });
    loadTheme();

    // إغلاق المودال بزر Escape
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && modal.classList.contains('active')) {
        closeModal();
      }
    });

  })();
</script>

</body>
</html>
